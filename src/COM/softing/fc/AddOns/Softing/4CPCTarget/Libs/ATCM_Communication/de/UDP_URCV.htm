<html>
<head>
<title>UDP_URCV</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link rel="stylesheet" href="Lib.css"></head>

<body bgcolor="#FFFFCC">
<h2>UDP_URCV </h2>
<p>Liest eine von einem Kommunikationspartner gesendete Botschaft.</p>
<h3>Schnittstelle</h3>
<pre class="preforma">FUNCTION_BLOCK UDP_URCV

VAR_INPUT
    EN_R     : BOOL;  
    DATA_LEN : DINT; 
END_VAR

VAR_IN_OUT
    SOCKET_HANDLE : UDP_SOCKET_HANDLE;  
END_VAR

VAR_OUTPUT
    RD_1         : BYTE_STRING;  
    PARTNER_ADDR : WSTRING;      
    PARTNER_PORT : DINT;         
    NDR          : BOOL;         
    ERROR        : BOOL;         
    ERROR_NR     : DINT;
    ERROR_STRING : WSTRING;
END_VAR</pre>
<h3>Parameter</h3>
<h3>INPUT</h3>
<dl> 
  <dt><b>EN_R</b></dt>
  <dd>Wert vom Typ <i><b>BOOL</b></i>.<br>
    Initialisiert Lesen einer neuen Botschaft.<br>
    M&ouml;gliche Werte:<br>
    <i><b>TRUE</b></i>: Neue Botschaft wird empfangen und gelesen.<br>
    <i><b>FALSE</b></i>: Neue Botschaft wird nicht empfangen und gelesen</dd>
  <dt><b>DATA_LEN</b></dt>
  <dd>Wert vom Typ <i><b>DINT</b></i>.<br>
    Definiert die maximale Anzahl Bytes, die aus einem Paket gelesen werden. Ist 
    das empfangene Paket gr&ouml;&szlig;er als die spezifierte Anzahl Bytes, gehen 
    die hinter dem letzten gelesenen Byte liegenden Bytes des gesendeten Pakets 
    verloren. </dd>
</dl>
<h3>IN_OUT</h3>
<dl> 
  <dt><b>SOCKET_HANDLE</b></dt>
  <dd>Instanz der Struktur <a href="UDP_SOCKET_HANDLE.htm"><i><b>UDP_SOCKET_HANDLE</b></i></a>.<br>
    Spezifiziert den Socket, &uuml;ber den die zu empfangenden Daten geliefert 
    werden. </dd>
</dl>
<h3>OUTPUT</h3>
<dl> 
  <dt><b>RD_1</b></dt>
  <dd>Wert vom Typ <i><b><a href="BYTE_STRING.htm">BYTE_STRING</a></b></i>.<br>
    Enth&auml;lt die empfangenen Daten.</dd>
  <dt><b>PARTNER_ADDR</b></dt>
  <dd>Wert vom Typ <i><b>WSTRING</b></i>.<br>
    Enth&auml;lt den Host-Namen des Kommunikationspartners, der die zuletzt empfangene 
    Botschaft gesendet hat. </dd>
  <dt><b>PARTNER_PORT</b></dt>
  <dd>Wert vom Typ <i><b>DINT</b></i>.<br>
    Enth&auml;lt die Portnummer des Sockets, &uuml;ber den die zuletzt empfangene 
    Botschaft gesendet wurde. </dd>
  <dt><b>NDR</b></dt>
  <dd>Wert vom Typ <i><b>BOOL</b></i>.<br>
    Signalisiert den Empfang einer neuen Botschaft.<br>
    M&ouml;gliche Werte:<br>
    <i><b>TRUE:</b></i> Eine neue Botschaft wurde empfangen<br>
    <i><b>FALSE:</b></i> Es wurde keine neue Botschaft empfangen.<br>
    <i><b>NDR</b></i> hat solange den Wert <i><b>TRUE</b></i>, wie sich Botschaften 
    im Lesepuffer befinden. Erst wenn alle sich im Puffer befindenden Botschaften 
    gelesen wurden, wird der Wert wieder auf <i><b>FALSE</b></i> zur&uuml;ckgesetzt. 
  </dd>
  <dt><b>ERROR</b></dt>
  <dd>Wert vom Typ <i><b>BOOL</b></i>.<br>
    Signalisiert den Fehlerstatus.<br>
    M&ouml;gliche Werte:<br>
    <i><b>TRUE</b></i>: Ein Fehler ist aufgetreten.<br>
    <i><b>FALSE</b></i>: Es ist kein Fehler aufgetreten.</dd>
  <dt><b>ERROR_NR</b></dt>
  <dd>Wert vom Typ <i><b>DINT</b></i>.<br>
    Enth&auml;lt eine Fehlernummer, falls ein Fehler aufgetreten ist. <br>
    Ist kein Fehler aufgetreten, hat diese Variable den Wert 0.<br>
    M&ouml;gliche Werte sind in den <a href="ConstUDPErr.htm">UDP-Fehlerkonstanten</a> 
    definiert.</dd>
  <dt><b>ERROR_STRING</b></dt>
  <dd>Wert vom Typ <i><b>WSTRING</b></i>.<br>
    Enth&auml;lt einen Fehlertext, falls ein Fehler aufgetreten ist. <br>
    Ist kein Fehler aufgetreten, enth&auml;lt diese Variable einen Leerstring.</dd>
</dl>
<h3>Beschreibung</h3>
<p>Der Aufruf einer Instanz von <i><b>UDP_URCV </b></i>liest Botschaften von einem 
  Kommunikationspartner, die an den im Parameter <i><b>SOCKET_HANDLE</b></i> spezifizierten 
  Socket gesendet wurden. Der Socket mu&szlig; auf dem empfangenden Rechner existieren. 
  <i> <b>UDP_URCV </b></i>ist lediglich f&uuml;r das Lesen, jedoch nicht f&uuml;r 
  das Empfangen von Botschaften zust&auml;ndig. Botschaften werden automatisch 
  empfangen und in einem Puffer gespeichert, wenn der Socket, an den Botschaften 
  gesendet werden, mit <a href="UDP_CONNECT.htm"><i><b>UDP_CONNECT</b></i></a> 
  initialisiert wurde. </p>
<p>Botschaften werden im Puffer paketweise abgelegt und k&ouml;nnen auch nur paketweise 
  gelesen werden. Ein Paket entpricht der L&auml;nge des mittels <i><b><a href="UDP_USEND.htm">UDP_USEND</a></b></i> 
  gesendeten Bytestrings. Pro Aufruf einer Instanz von <i><b>UDP_URCV</b></i> 
  wird ein Paket aus dem Puffer gelesen. Die maximale L&auml;nge der aus dem Paket 
  zu lesenden Bytes wird im Parameter <i><b>DATA_LEN</b></i> spezifiziert. Ist 
  das empfangene Paket gr&ouml;&szlig;er als die spezifierte Anzahl Bytes, gehen 
  die hinter dem letzten gelesenen Byte liegenden Bytes des gesendeten Pakets 
  verloren. </p>
</body>
</html>
