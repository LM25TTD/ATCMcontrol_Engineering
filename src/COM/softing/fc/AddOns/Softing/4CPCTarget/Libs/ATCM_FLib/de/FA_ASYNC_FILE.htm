<html>
<head>
<title>FA_ASYNC_FILE</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link rel="stylesheet" href="Lib.css">
</head>

<body bgcolor="#FFFFCC">
<h2>FA_ASYNC_FILE </h2>
<p>Repr&auml;sentiert eine Datei f&uuml;r asynchrone Dateioperationen.</p>
<h3>Schnittstelle</h3>
<pre class="preforma">TYPE
    FA_ASYNC_FILE : STRUCT
    FILENAME        : WSTRING;         
    MODE            : DINT;             
    TEXTMODE        : BOOL;             
    TOUT            : TIME;             
    POSITION        : DINT;             
    LSTOP           : WSTRING;          
    LSTINST         : WSTRING;          
    ISERROR         : BOOL;             
    LSTERRCD        : DINT;             
    LSTERRTXT       : WSTRING;          
    ISOPEN          : BOOL;             
    END_STRUCT;
END_TYPE</pre>

<h3>Strukturelemente</h3>

<dl> 
  <dt> <b>FILENAME</b> </dt>
  <dd>Wert vom Typ <b><i>WSTRING</i></b><br>
    Spezifiziert den Namen der Datei. <br>
    Der Dateiname kann mit voll qualifiziertem Pfad angegeben werden. Wird kein 
    Pfad spezifiziert, wird intern das Standard-Arbeitsverzeichnis von ATCMControl 
    als Pfad erg&auml;nzt. Das Standard-Arbeitsverzeichnis ist das Verzeichnis 
    <font face="Courier New, Courier, mono">data</font> direkt unterhalb des ATCMControl-Installationsverzeichnisses.<br>
    Der Dateiname einschlie&szlig;lich Pfadangabe wird vom Compiler nicht auf 
    korrekte Syntax oder Plausibilit&auml;t &uuml;berpr&uuml;ft. </dd>
  <dt><b>MODE</b></dt>
  <dd>Wert vom Typ <b><i>DINT</i></b><br>
    Spezifiziert den Zugriffsmodus auf eine neu erzeugte oder ge&ouml;ffnete Datei.<br>
    M&ouml;gliche Werte sind in den <a href="Const_Mode.htm">Zugriffsmodus-Konstanten 
    </a>definiert. </dd>
  <dt><b>TEXTMODE</b></dt>
  <dd>Wert vom Typ <i><b>BOOL</b></i><br>
    Spezifiziert, ob die Datei im Textmodus oder im Bin&auml;rmodus ge&ouml;ffnet 
    wird. <br>
    M&ouml;gliche Werte:<br>
    <i><b>TRUE</b></i>: Datei wird im Textmodus ge&ouml;ffnet.<br>
    <i><b>FALSE</b></i>: Datei wird im Bin&auml;rmodus ge&ouml;ffnet.<br>
    Standardwert ist <i><b>FALSE</b></i>.</dd>
  <dt><b>TOUT</b></dt>
  <dd>Wert vom Typ <b><i>TIME</i></b><br>
    Spezifiziert die Zeit , nach der der Versuch einer Funktionsbausteininstanz 
    oder Funktion, eine Operation auf eine durch eine Strukturinstanz von<i><b> 
    FA_ASYNC_FILE</b></i> repr&auml;sentierte Datei auszuf&uuml;hren, abgebrochen 
    wird. <br>
    Standardwert ist T#0ms. Bei einer Initialisierung mit diesem Wert wird kein 
    Timeout gesetzt, d.h. der Zeitraum, w&auml;hrend dessen versucht wird, eine 
    Dateioperation auszuf&uuml;hren, wird nicht &uuml;berwacht. </dd>
  <dt><b>POSITION</b></dt>
  <dd>Wert vom Typ <i><b>DINT</b></i><br>
    Enth&auml;lt die Byte-Position, auf der der Dateizeiger nach der zuletzt ausgef&uuml;hrten 
    Dateioperation steht. Dies ist immer 1 Byte hinter dem zuletzt gelesenen oder 
    geschriebenen Byte. Der Wert von <i><b>POSITION</b></i> wird automatisch nach 
    jeder Dateioperation aktualisiert. Die erste g&uuml;ltige Schreib- oder Leseposition 
    ist 0. <br>
    <i><b>POSITION</b></i> kann auch gesetzt werden, um die Schreib- oder Leseposition 
    vor der n&auml;chsten Dateioperation festzulegen. <br>
    F&uuml;r Beginn und Ende einer Datei sowie das Ende einer Zeile sind <a href="Const_Pos.htm">Positions-Konstanten</a> 
    definiert.</dd>
  <dt><b>LSTOP</b></dt>
  <dd>Wert vom Typ <i><b>WSTRING</b></i><br>
    Enth&auml;lt den Namen der Baustein-Klasse, von der zuletzt eine Baustein-Instanz 
    mit dieser Instanz von <i><b>FA_ASYNC_FILE</b></i> aufgerufen wurde.</dd>
  <dt><b>LSTINST</b></dt>
  <dd>Wert vom Typ <i><b>WSTRING</b></i><br>
    Enth&auml;lt den Namen der Baustein-Instanz, die zuletzt mit dieser Instanz 
    von <i><b>FA_ASYNC_FILE</b></i> aufgerufen wurde.</dd>
  <dt><b>LSTERROR</b></dt>
  <dd><b></b>Wert vom Typ <i><b>BOOL</b></i><br>
    Enth&auml;lt den Fehlerstatus der letzten Operation, die auf eine durch eine 
    Strukturinstanz von <i><b>FA_ASYNC_FILE</b></i> repr&auml;sentierte Datei 
    ausgef&uuml;hrt wurde.<br>
    M&ouml;gliche Werte:<br>
    <b>TRUE</b>: Ein Fehler ist aufgetreten.<br>
    <b>FALSE</b>: Es ist kein Fehler aufgetreten.</dd>
  <dt><b>LSTERRCD </b></dt>
  <dd>Wert vom Typ <b><i>DINT</i></b><br>
    Enth&auml;lt eine Fehlernummer, wenn bei der letzten Operation, die auf eine 
    durch eine Strukturinstanz von <i><b>FA_ASYNC_FILE</b></i> repr&auml;sentierte 
    Datei ausgef&uuml;hrt wurde, ein Fehler aufgetreten ist. Ist kein Fehler aufgetreten, 
    hat diese Strukturvariable den Wert <b>0</b>.<br>
    M&ouml;gliche Werte sind in den <a href="Const_Error.htm">Fehlerkonstanten</a> 
    definiert.</dd>
  <dt><b>LSTERRTXT</b></dt>
  <dd>Wert vom Typ <b><i>WSTRING</i></b><br>
    Enth&auml;lt eine Fehlerbeschreibung, wenn bei der letzten Operation, die 
    auf eine durch eine Strukturinstanz von <i><b>FA_ASYNC_FILE</b></i> repr&auml;sentierte 
    Datei ausgef&uuml;hrt wurde, ein Fehler aufgetreten ist. Ist kein Fehler aufgetreten, 
    enth&auml;lt diese Strukturvariable einen Leerstring.</dd>
  <dt><b>ISOPEN</b></dt>
  <dd>Wert vom Typ <i><b>BOOL</b></i><br>
    Zeigt an, ob die Datei aktuell ge&ouml;ffnet ist.<br>
    M&ouml;gliche Werte:<br>
    <i><b>TRUE</b></i>: Datei ist ge&ouml;ffnet.<br>
    <i><b>FALSE</b></i>: Datei ist nicht ge&ouml;ffnet.</dd>
  <dt>&nbsp;</dt>
</dl>
<h3>Beschreibung</h3>
<p>Strukturinstanzen von <i><b>FA_ASYNC_FILE</b></i> repr&auml;sentieren eine 
  Datei, auf die asynchrone Lese- und Schreiboperationen ausgef&uuml;hrt werden. 
  Jeder Funktionsbaustein der Bausteingruppe f&uuml;r elementare asynchrone Dateioperationen 
  ben&ouml;tigt als Parameter eine Instanz der Struktur<i><b> FA_ASYNC_FILE</b></i>, 
  um die Datei, auf die der Zugriff ausgef&uuml;hrt wird, zu identifizieren. </p>
<p>Vor der Initialisierung eines Zugriffszyklus ist es notwendig, mindestens die 
  Parameter <i><b>FILENAME</b></i> und <i><b>MODE</b></i> der an <i><b><a href="Async_OpenFile.htm">FA_ASYNC_OPENFILE</a></b></i> 
  &uuml;bergebenen Instanz von <i><b>FA_ASYNC_FILE</b></i> mit Werten zu initialisieren. 
</p>
<p>Eine Fehler&uuml;berwachung kann mit Hilfe der Parameter <i><b>LSTERROR</b></i>, 
  <i> <b>LSTERRCD</b></i> und <i><b>LSTERRTXT</b></i> implementiert werden. Diese 
  Variablen werden nach jeder Dateioperation automatisch aktualisiert und enthalten 
  im Fehlerfall Fehlerstatus, Fehlernummer und Fehlertext zur zuletzt mit der 
  entsprechenden Instanz von<i><b> FA_ASYNC_FILE</b></i> ausgef&uuml;hrten Operation. 
  Um die Fehler&uuml;berwachung f&uuml;r eine bestimmte Dateioperation zu implementieren, 
  m&uuml;ssen diese Variablen daher sp&auml;testens vor der n&auml;chsten auszuf&uuml;hrenden 
  Dateioperation ausgewertet werden, da die Fehlervariablen immer mit den Werten 
  der zuletzt ausgef&uuml;hrten Operation &uuml;berschrieben werden.</p>
<p>Beachten Sie, da&szlig; Instanzen von <b>FA_ASNC_FILE</b> nicht kopiert werden 
  k&ouml;nnen.</p>
</body>
</html>
